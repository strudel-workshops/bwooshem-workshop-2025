import{g as v,a as C,d as m,e as T,_ as M,b as j,j as e,s as P,h as w,k as $,a1 as W,a2 as k,B as S,C as H,S as n,P as h,T as t,a3 as R,a4 as p,a5 as o,a6 as D,a7 as N,a8 as I,a9 as U}from"./index-DcHxBZT6.js";import{P as A}from"./PageHeader-BhevH8qy.js";import{u as L}from"./useDetailQuery-DmXU_V1Z.js";import{u as _}from"./useCSVStatistics-CFY102ya.js";import{P as b}from"./react-plotly-BlLbsvip.js";import{M as f}from"./MenuItem-h1Fc6j9M.js";import"./useQuery-DYKSalg9.js";import"./index-Chjiymov.js";import"./dividerClasses-fahtFUAT.js";function z(a){return v("MuiTableContainer",a)}C("MuiTableContainer",["root"]);const B=["className","component"],E=a=>{const{classes:s}=a;return $({root:["root"]},z,s)},F=P("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(a,s)=>s.root})({width:"100%",overflowX:"auto"}),V=m.forwardRef(function(s,r){const c=T({props:s,name:"MuiTableContainer"}),{className:x,component:d="div"}=c,g=M(c,B),l=j({},c,{component:d}),u=E(l);return e.jsx(F,j({ref:r,as:d,className:w(u.root,x),ownerState:l},g))});function q(a){return v("MuiTableHead",a)}C("MuiTableHead",["root"]);const O=["className","component"],Q=a=>{const{classes:s}=a;return $({root:["root"]},q,s)},X=P("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(a,s)=>s.root})({display:"table-header-group"}),G={variant:"head"},y="thead",J=m.forwardRef(function(s,r){const c=T({props:s,name:"MuiTableHead"}),{className:x,component:d=y}=c,g=M(c,O),l=j({},c,{component:d}),u=Q(l);return e.jsx(W.Provider,{value:G,children:e.jsx(X,j({as:d,className:w(u.root,x),ref:r,role:d===y?null:"rowgroup",ownerState:l},g))})});function K({filename:a}){const{stats:s,data:r,monthlyStats:c,hourlyProfile:x,loading:d,error:g}=_(a),[l,u]=m.useState("average");return a?d?e.jsx(h,{sx:{padding:2},children:e.jsx(t,{children:"Loading CSV data..."})}):g?e.jsx(h,{sx:{padding:2},children:e.jsxs(t,{color:"error",children:["Error: ",g]})}):s?e.jsxs(n,{spacing:3,children:[e.jsx(h,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsxs(t,{variant:"h6",fontWeight:"bold",children:["Data Summary for ",a,".csv"]}),e.jsxs(n,{spacing:1,children:[e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(t,{fontWeight:"bold",children:"Number of datapoints:"}),e.jsx(t,{children:s.count.toLocaleString()})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(t,{fontWeight:"bold",children:"Average Price ($/kWh):"}),e.jsxs(t,{children:["$",s.average]})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(t,{fontWeight:"bold",children:"Median Price ($/kWh):"}),e.jsxs(t,{children:["$",s.median]})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(t,{fontWeight:"bold",children:"Maximum Price ($/kWh):"}),e.jsxs(t,{children:["$",s.max]})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(t,{fontWeight:"bold",children:"Minimum Price ($/kWh):"}),e.jsxs(t,{children:["$",s.min]})]})]})]})}),e.jsx(h,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsx(t,{variant:"h6",fontWeight:"bold",children:"Monthly Statistics"}),e.jsx(V,{children:e.jsxs(R,{children:[e.jsx(J,{children:e.jsxs(p,{children:[e.jsx(o,{children:e.jsx("strong",{children:"Month"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Average ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Median ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Max ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Min ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Data Points"})})]})}),e.jsx(D,{children:c.map(i=>e.jsxs(p,{hover:!0,children:[e.jsx(o,{children:i.month}),e.jsxs(o,{align:"right",children:["$",i.average]}),e.jsxs(o,{align:"right",children:["$",i.median]}),e.jsxs(o,{align:"right",children:["$",i.max]}),e.jsxs(o,{align:"right",children:["$",i.min]}),e.jsx(o,{align:"right",children:i.count.toLocaleString()})]},i.month))})]})})]})}),e.jsx(h,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsxs(n,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(t,{variant:"h6",fontWeight:"bold",children:"Typical Daily Profile"}),e.jsxs(N,{size:"small",sx:{minWidth:120},children:[e.jsx(I,{id:"hourly-metric-label",children:"Metric"}),e.jsxs(U,{labelId:"hourly-metric-label",id:"hourly-metric-select",value:l,label:"Metric",onChange:i=>u(i.target.value),children:[e.jsx(f,{value:"average",children:"Average"}),e.jsx(f,{value:"median",children:"Median"})]})]})]}),e.jsx(b,{data:[{x:x.map(i=>i.hour),y:x.map(i=>l==="average"?i.averagePrice:i.medianPrice),type:"scatter",mode:"lines+markers",name:`${l==="average"?"Average":"Median"} Price`,line:{color:"#2e7d32",width:2},marker:{size:6}}],layout:{autosize:!0,margin:{l:60,r:40,t:20,b:60},xaxis:{title:"Hour of Day",tickmode:"linear",tick0:0,dtick:2,range:[-.5,23.5]},yaxis:{title:`${l==="average"?"Average":"Median"} Price ($/kWh)`},showlegend:!1},style:{width:"100%",height:"400px"},config:{responsive:!0}})]})}),e.jsx(h,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsx(t,{variant:"h6",fontWeight:"bold",children:"Price Over Time"}),e.jsx(b,{data:[{x:r.map(i=>i.datetime),y:r.map(i=>i.price),type:"scatter",mode:"lines",name:"Price ($/kWh)",line:{color:"#1976d2"}}],layout:{autosize:!0,margin:{l:60,r:40,t:20,b:80},xaxis:{title:"Date/Time",tickangle:-45},yaxis:{title:"Price ($/kWh)"},showlegend:!1},style:{width:"100%",height:"400px"},config:{responsive:!0}})]})})]}):e.jsx(h,{sx:{padding:2},children:e.jsx(t,{children:"No statistics available"})}):e.jsx(h,{sx:{padding:2},children:e.jsx(t,{children:"No file selected"})})}const oe=function(){const{id:s}=k.useParams(),{data:r}=L({dataSource:"dummy-data/file-entities.json",dataIdField:"name",paramId:s,queryMode:"client",staticParams:null});return e.jsxs(S,{children:[e.jsx(A,{pageTitle:r?`${r.name}.csv`:"",breadcrumbTitle:"File Detail",sx:{marginBottom:1,padding:2}}),e.jsx(H,{maxWidth:"xl",children:e.jsx(n,{children:e.jsx(K,{filename:r?r.name:""})})})]})};export{oe as component};
