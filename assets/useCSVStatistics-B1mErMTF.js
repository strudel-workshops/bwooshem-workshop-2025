import{d as m,E as ge,F as fe}from"./index-CcL4YOBG.js";function De(E){const[G,x]=m.useState(null),[K,O]=m.useState([]),[Q,C]=m.useState([]),[R,W]=m.useState([]),[T,j]=m.useState([]),[U,J]=m.useState([]),[X,_]=m.useState([]),[Z,$]=m.useState(!1),[ee,F]=m.useState(null);return m.useEffect(()=>{if(!E){x(null),O([]),C([]),W([]),j([]),J([]),_([]),$(!1),F(null);return}(async()=>{var q;$(!0),F(null);try{const b=((q=document.querySelector("base"))==null?void 0:q.getAttribute("href"))??"",L="/bwooshem-workshop-2025/",te=`${ge((L?"/":"")+b+L)}/data/${E}.csv`,D=await fe(te);if(!D||D.length===0)throw new Error("No data found in CSV file");const re=Object.keys(D[0])[0],ne=Object.keys(D[0])[1],f=[],y=[];if(D.forEach(n=>{const r=parseFloat(n[ne]);isNaN(r)||(f.push(r),y.push({datetime:n[re],price:r}))}),f.length===0)throw new Error("No valid price data found");O(y);const P=f.length,ae=f.reduce((n,r)=>n+r,0)/P,V=[...f].sort((n,r)=>n-r),oe=P%2===0?(V[P/2-1]+V[P/2])/2:V[Math.floor(P/2)],se=Math.max(...f),ce=Math.min(...f),H={};y.forEach(n=>{const r=n.datetime.split(" ")[0];H[r]||(H[r]=[]),H[r].push(n.price)});const I=Object.values(H).map(n=>{const r=Math.max(...n),e=Math.min(...n);return r-e}),le=I.length>0?I.reduce((n,r)=>n+r,0)/I.length:0;x({count:P,average:Math.round(ae*1e4)/1e4,median:Math.round(oe*1e4)/1e4,max:Math.round(se*1e4)/1e4,min:Math.round(ce*1e4)/1e4,averageDailyPriceDelta:Math.round(le*1e4)/1e4});const M={};y.forEach(n=>{const e=n.datetime.split(" ")[0].substring(0,7);M[e]||(M[e]=[]),M[e].push(n.price)});const he=Object.keys(M).sort().map(n=>{const r=M[n],e=r.length,c=r.reduce((s,a)=>s+a,0)/e,o=[...r].sort((s,a)=>s-a),l=e%2===0?(o[e/2-1]+o[e/2])/2:o[Math.floor(e/2)],g=Math.max(...r),Y=Math.min(...r),p={};y.forEach(s=>{const a=s.datetime.split(" ")[0];a.substring(0,7)===n&&(p[a]||(p[a]=[]),p[a].push(s.price))});const N=Object.values(p).map(s=>{const a=Math.max(...s),h=Math.min(...s);return a-h}),B=N.length>0?N.reduce((s,a)=>s+a,0)/N.length:0,[u,i]=n.split("-");return{month:`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(i,10)-1]} ${u}`,average:Math.round(c*1e4)/1e4,median:Math.round(l*1e4)/1e4,max:Math.round(g*1e4)/1e4,min:Math.round(Y*1e4)/1e4,count:e,averageDailyPriceDelta:Math.round(B*1e4)/1e4}});C(he);const z=n=>{const e=new Date(n).getDay();return e>=1&&e<=5},k={},A={},w={};y.forEach(n=>{const r=n.datetime.split(" ")[1],e=parseInt(r.split(":")[0],10);k[e]||(k[e]=[]),k[e].push(n.price),z(n.datetime)?(A[e]||(A[e]=[]),A[e].push(n.price)):(w[e]||(w[e]=[]),w[e].push(n.price))});const ie=Array.from({length:24},(n,r)=>{const e=k[r]||[],d=e.length>0?e.reduce((o,l)=>o+l,0)/e.length:0;let c=0;if(e.length>0){const o=[...e].sort((l,g)=>l-g);c=e.length%2===0?(o[e.length/2-1]+o[e.length/2])/2:o[Math.floor(e.length/2)]}return{hour:r,averagePrice:Math.round(d*1e4)/1e4,medianPrice:Math.round(c*1e4)/1e4}});W(ie);const ue=Array.from({length:24},(n,r)=>{const e=A[r]||[],d=e.length>0?e.reduce((o,l)=>o+l,0)/e.length:0;let c=0;if(e.length>0){const o=[...e].sort((l,g)=>l-g);c=e.length%2===0?(o[e.length/2-1]+o[e.length/2])/2:o[Math.floor(e.length/2)]}return{hour:r,averagePrice:Math.round(d*1e4)/1e4,medianPrice:Math.round(c*1e4)/1e4}});j(ue);const de=Array.from({length:24},(n,r)=>{const e=w[r]||[],d=e.length>0?e.reduce((o,l)=>o+l,0)/e.length:0;let c=0;if(e.length>0){const o=[...e].sort((l,g)=>l-g);c=e.length%2===0?(o[e.length/2-1]+o[e.length/2])/2:o[Math.floor(e.length/2)]}return{hour:r,averagePrice:Math.round(d*1e4)/1e4,medianPrice:Math.round(c*1e4)/1e4}});J(de);const me=Object.keys(M).sort().map(n=>{const r=y.filter(u=>u.datetime.split(" ")[0].substring(0,7)===n),e={},d={},c={};r.forEach(u=>{const i=u.datetime.split(" ")[1],t=parseInt(i.split(":")[0],10);e[t]||(e[t]=[]),e[t].push(u.price),z(u.datetime)?(d[t]||(d[t]=[]),d[t].push(u.price)):(c[t]||(c[t]=[]),c[t].push(u.price))});const o=Array.from({length:24},(u,i)=>{const t=e[i]||[],S=t.length>0?t.reduce((a,h)=>a+h,0)/t.length:0;let s=0;if(t.length>0){const a=[...t].sort((h,v)=>h-v);s=t.length%2===0?(a[t.length/2-1]+a[t.length/2])/2:a[Math.floor(t.length/2)]}return{hour:i,averagePrice:Math.round(S*1e4)/1e4,medianPrice:Math.round(s*1e4)/1e4}}),l=Array.from({length:24},(u,i)=>{const t=d[i]||[],S=t.length>0?t.reduce((a,h)=>a+h,0)/t.length:0;let s=0;if(t.length>0){const a=[...t].sort((h,v)=>h-v);s=t.length%2===0?(a[t.length/2-1]+a[t.length/2])/2:a[Math.floor(t.length/2)]}return{hour:i,averagePrice:Math.round(S*1e4)/1e4,medianPrice:Math.round(s*1e4)/1e4}}),g=Array.from({length:24},(u,i)=>{const t=c[i]||[],S=t.length>0?t.reduce((a,h)=>a+h,0)/t.length:0;let s=0;if(t.length>0){const a=[...t].sort((h,v)=>h-v);s=t.length%2===0?(a[t.length/2-1]+a[t.length/2])/2:a[Math.floor(t.length/2)]}return{hour:i,averagePrice:Math.round(S*1e4)/1e4,medianPrice:Math.round(s*1e4)/1e4}}),[Y,p]=n.split("-");return{month:`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(p,10)-1]} ${Y}`,profile:o,weekdayProfile:l,weekendProfile:g}});_(me)}catch(b){F(b instanceof Error?b.message:"Failed to load CSV data"),x(null),O([]),C([]),W([]),j([]),J([]),_([])}finally{$(!1)}})()},[E]),{stats:G,data:K,monthlyStats:Q,hourlyProfile:R,weekdayHourlyProfile:T,weekendHourlyProfile:U,monthlyHourlyProfiles:X,loading:Z,error:ee}}export{De as u};
