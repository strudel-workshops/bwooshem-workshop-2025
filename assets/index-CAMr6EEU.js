import{d as h,j as e,B as l,D as W,A as P,n as q,o as E,p as I,q as A,S as m,T as d,v as C,w as V,P as $,x as B,L as H}from"./index-CVi8cOX7.js";import{u as _,F as N,a as O}from"./FilterField-Bn7u6E-t.js";import{P as G}from"./PageHeader-DsmtDJgN.js";import{S as J}from"./SciDataGrid-CSIWYHcH.js";import{u as Q,f as K,F as U}from"./useListQuery-C-yYQSeZ.js";import{S as X}from"./DataGrid-C5opNX8j.js";import{A as Y,C as Z}from"./Close-BTvUQqOz.js";import{u as ee}from"./useCSVStatistics-CaitVhFX.js";import{P as te}from"./react-plotly-BhyKuKQI.js";import"./DatePicker-C8r1HvhP.js";import"./DateCalendar-DX7SP7el.js";import"./colorManipulator-DRRewSaV.js";import"./Grid-Bw9MNmvH.js";import"./useQuery-CeqWnLwZ.js";import"./index-Chjiymov.js";import"./useGridRootProps-BL4u_Zks.js";import"./MenuItem-ChSclvTl.js";import"./dividerClasses-CKbybaIL.js";import"./Divider-4rW4rYKY.js";const ie=({filterConfigs:i,searchTerm:r,setPreviewItem:t})=>{const{activeFilters:a}=_(),[o,c]=h.useState(0),[s,g]=h.useState(25),[j,f]=h.useState(o*s),b="name",S="client",{isPending:y,isFetching:k,isError:L,data:D,error:R}=Q({activeFilters:a,dataSource:"dummy-data/file-entities.json",filterConfigs:i,offset:j,pageSize:s,queryMode:S,staticParams:null}),z=n=>{t(n.row)},M=n=>{const u=n.pageSize!==s?0:n.page,x=n.pageSize,v=u*x;c(u),g(x),f(v)};if(y){const u=new Array(s).fill(null).map((x,v)=>v);return e.jsx(l,{sx:{padding:2},children:u.map(x=>e.jsx(X,{height:50},x))})}if(L)return e.jsx(Y,{severity:"error",children:R.message});const T=[{field:"name",headerName:"Name",width:300,renderCell:n=>e.jsxs(P,{to:"/explore-data/$id",params:{id:n.value},children:[n.value,".csv"]})},{field:"average",headerName:"Average",width:200}];return e.jsxs(e.Fragment,{children:[k&&e.jsx(W,{variant:"indeterminate"}),e.jsx(J,{rows:K(D,a,i,r),pagination:!0,paginationMode:S,onPaginationModelChange:M,getRowId:n=>n[b],columns:T,disableColumnSelector:!0,autoHeight:!0,initialState:{pagination:{paginationModel:{page:o,pageSize:s}}},onRowClick:z})]})};var p={},w;function re(){if(w)return p;w=1;var i=q();Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var r=i(E()),t=I();return p.default=(0,r.default)((0,t.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),p}var ae=re();const se=A(ae),ne=({searchTerm:i,setSearchTerm:r,onToggleFiltersPanel:t})=>{const a=o=>{r(o.target.value)};return e.jsxs(m,{direction:"row",spacing:2,alignItems:"center",sx:{overflow:"hidden",padding:2},children:[e.jsx(d,{variant:"h6",component:"h2",flex:1,children:"Entity List"}),e.jsx(C,{startIcon:e.jsx(se,{}),onClick:t,children:"Filters"}),e.jsx(V,{variant:"outlined",label:"Search",size:"small",value:i,onChange:a})]})},oe=({filterConfigs:i,onClose:r})=>e.jsx(U,{grouped:!1,onClose:r,sx:{border:"none"},children:i.map((t,a)=>e.jsx(N,{field:t.field,label:t.label,operator:"contains",filterComponent:t.filterComponent,filterProps:t.filterProps},`${t.field}-${a}`))}),le=({previewItem:i,onClose:r})=>{const{stats:t,data:a,loading:o,error:c}=ee(i.name);return e.jsx($,{elevation:0,sx:{height:"100%",padding:2},children:e.jsxs(m,{spacing:3,children:[e.jsxs(m,{spacing:1,children:[e.jsxs(m,{direction:"row",children:[e.jsx(d,{variant:"h6",component:"h3",flex:1,children:e.jsxs(P,{to:"/explore-data/$id",params:{id:i.name},children:[i.name,".csv"]})}),e.jsx(B,{size:"small",onClick:r,children:e.jsx(Z,{})})]}),e.jsx(d,{variant:"body2",children:"CSV file statistics for Price ($/kWh) column"})]}),o&&e.jsx(l,{children:e.jsx(d,{children:"Loading statistics..."})}),c&&e.jsx(l,{children:e.jsxs(d,{color:"error",children:["Error: ",c]})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsx(d,{fontWeight:"medium",mb:1,children:"Price Statistics"}),e.jsx(H,{rows:[{label:"Number of datapoints",value:t.count.toLocaleString()},{label:"Average Price ($/kWh)",value:`$${t.average}`},{label:"Median Price ($/kWh)",value:`$${t.median}`},{label:"Maximum Price ($/kWh)",value:`$${t.max}`},{label:"Minimum Price ($/kWh)",value:`$${t.min}`}]})]}),e.jsxs(l,{children:[e.jsx(d,{fontWeight:"medium",mb:1,children:"Price Over Time"}),e.jsx(te,{data:[{x:a.map(s=>s.datetime),y:a.map(s=>s.price),type:"scatter",mode:"lines",name:"Price ($/kWh)",line:{color:"#1976d2"}}],layout:{autosize:!0,margin:{l:50,r:20,t:20,b:50},xaxis:{title:"Date/Time",tickangle:-45},yaxis:{title:"Price ($/kWh)"},showlegend:!1},style:{width:"100%",height:"300px"},config:{responsive:!0}})]})]}),e.jsx(m,{direction:"row",children:e.jsx(P,{to:"/explore-data/$id",params:{id:i.name},children:e.jsx(C,{variant:"contained",children:"View details"})})})]})})},F=[],ke=function(){const[r,t]=h.useState(""),[a,o]=h.useState(),[c,s]=h.useState(!0),g=()=>{s(!1)},j=()=>{s(!c)},f=()=>{o(null)};return e.jsx(O,{children:e.jsxs(l,{children:[e.jsx(G,{pageTitle:"Explore Data App",description:"Description of this app",sx:{marginBottom:1,padding:2}}),e.jsx(l,{children:e.jsxs(m,{direction:"row",children:[c&&e.jsx(l,{sx:{width:"350px"},children:e.jsx(oe,{filterConfigs:F,onClose:g})}),e.jsxs($,{elevation:0,sx:{flex:1,minHeight:"600px",minWidth:0},children:[e.jsx(ne,{searchTerm:r,setSearchTerm:t,onToggleFiltersPanel:j}),e.jsx(ie,{filterConfigs:F,searchTerm:r,setPreviewItem:o})]}),a&&e.jsx(l,{sx:{minWidth:"400px"},children:e.jsx(le,{previewItem:a,onClose:f})})]})})]})})};export{ke as component};
