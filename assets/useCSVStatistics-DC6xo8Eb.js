import{d,E as ue,F as de}from"./index-DCknfy59.js";function Me(D){const[L,w]=d.useState(null),[z,N]=d.useState([]),[B,E]=d.useState([]),[G,x]=d.useState([]),[K,C]=d.useState([]),[Q,W]=d.useState([]),[R,O]=d.useState([]),[T,J]=d.useState(!1),[U,_]=d.useState(null);return d.useEffect(()=>{if(!D){w(null),N([]),E([]),x([]),C([]),W([]),O([]),J(!1),_(null);return}(async()=>{var j;J(!0),_(null);try{const v=((j=document.querySelector("base"))==null?void 0:j.getAttribute("href"))??"",I="/bwooshem-workshop-2025/",X=`${ue((I?"/":"")+v+I)}/data/${D}.csv`,M=await de(X);if(!M||M.length===0)throw new Error("No data found in CSV file");const Z=Object.keys(M[0])[0],ee=Object.keys(M[0])[1],f=[],p=[];if(M.forEach(n=>{const r=parseFloat(n[ee]);isNaN(r)||(f.push(r),p.push({datetime:n[Z],price:r}))}),f.length===0)throw new Error("No valid price data found");N(p);const y=f.length,te=f.reduce((n,r)=>n+r,0)/y,$=[...f].sort((n,r)=>n-r),re=y%2===0?($[y/2-1]+$[y/2])/2:$[Math.floor(y/2)],ne=Math.max(...f),oe=Math.min(...f);w({count:y,average:Math.round(te*1e4)/1e4,median:Math.round(re*1e4)/1e4,max:Math.round(ne*1e4)/1e4,min:Math.round(oe*1e4)/1e4});const P={};p.forEach(n=>{const e=n.datetime.split(" ")[0].substring(0,7);P[e]||(P[e]=[]),P[e].push(n.price)});const ae=Object.keys(P).sort().map(n=>{const r=P[n],e=r.length,s=r.reduce((l,t)=>l+t,0)/e,o=[...r].sort((l,t)=>l-t),c=e%2===0?(o[e/2-1]+o[e/2])/2:o[Math.floor(e/2)],m=Math.max(...r),F=Math.min(...r),[V,q]=n.split("-");return{month:`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(q,10)-1]} ${V}`,average:Math.round(s*1e4)/1e4,median:Math.round(c*1e4)/1e4,max:Math.round(m*1e4)/1e4,min:Math.round(F*1e4)/1e4,count:e}});E(ae);const Y=n=>{const e=new Date(n).getDay();return e>=1&&e<=5},H={},k={},A={};p.forEach(n=>{const r=n.datetime.split(" ")[1],e=parseInt(r.split(":")[0],10);H[e]||(H[e]=[]),H[e].push(n.price),Y(n.datetime)?(k[e]||(k[e]=[]),k[e].push(n.price)):(A[e]||(A[e]=[]),A[e].push(n.price))});const se=Array.from({length:24},(n,r)=>{const e=H[r]||[],h=e.length>0?e.reduce((o,c)=>o+c,0)/e.length:0;let s=0;if(e.length>0){const o=[...e].sort((c,m)=>c-m);s=e.length%2===0?(o[e.length/2-1]+o[e.length/2])/2:o[Math.floor(e.length/2)]}return{hour:r,averagePrice:Math.round(h*1e4)/1e4,medianPrice:Math.round(s*1e4)/1e4}});x(se);const ce=Array.from({length:24},(n,r)=>{const e=k[r]||[],h=e.length>0?e.reduce((o,c)=>o+c,0)/e.length:0;let s=0;if(e.length>0){const o=[...e].sort((c,m)=>c-m);s=e.length%2===0?(o[e.length/2-1]+o[e.length/2])/2:o[Math.floor(e.length/2)]}return{hour:r,averagePrice:Math.round(h*1e4)/1e4,medianPrice:Math.round(s*1e4)/1e4}});C(ce);const le=Array.from({length:24},(n,r)=>{const e=A[r]||[],h=e.length>0?e.reduce((o,c)=>o+c,0)/e.length:0;let s=0;if(e.length>0){const o=[...e].sort((c,m)=>c-m);s=e.length%2===0?(o[e.length/2-1]+o[e.length/2])/2:o[Math.floor(e.length/2)]}return{hour:r,averagePrice:Math.round(h*1e4)/1e4,medianPrice:Math.round(s*1e4)/1e4}});W(le);const he=Object.keys(P).sort().map(n=>{const r=p.filter(i=>i.datetime.split(" ")[0].substring(0,7)===n),e={},h={},s={};r.forEach(i=>{const l=i.datetime.split(" ")[1],t=parseInt(l.split(":")[0],10);e[t]||(e[t]=[]),e[t].push(i.price),Y(i.datetime)?(h[t]||(h[t]=[]),h[t].push(i.price)):(s[t]||(s[t]=[]),s[t].push(i.price))});const o=Array.from({length:24},(i,l)=>{const t=e[l]||[],S=t.length>0?t.reduce((a,u)=>a+u,0)/t.length:0;let g=0;if(t.length>0){const a=[...t].sort((u,b)=>u-b);g=t.length%2===0?(a[t.length/2-1]+a[t.length/2])/2:a[Math.floor(t.length/2)]}return{hour:l,averagePrice:Math.round(S*1e4)/1e4,medianPrice:Math.round(g*1e4)/1e4}}),c=Array.from({length:24},(i,l)=>{const t=h[l]||[],S=t.length>0?t.reduce((a,u)=>a+u,0)/t.length:0;let g=0;if(t.length>0){const a=[...t].sort((u,b)=>u-b);g=t.length%2===0?(a[t.length/2-1]+a[t.length/2])/2:a[Math.floor(t.length/2)]}return{hour:l,averagePrice:Math.round(S*1e4)/1e4,medianPrice:Math.round(g*1e4)/1e4}}),m=Array.from({length:24},(i,l)=>{const t=s[l]||[],S=t.length>0?t.reduce((a,u)=>a+u,0)/t.length:0;let g=0;if(t.length>0){const a=[...t].sort((u,b)=>u-b);g=t.length%2===0?(a[t.length/2-1]+a[t.length/2])/2:a[Math.floor(t.length/2)]}return{hour:l,averagePrice:Math.round(S*1e4)/1e4,medianPrice:Math.round(g*1e4)/1e4}}),[F,V]=n.split("-");return{month:`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(V,10)-1]} ${F}`,profile:o,weekdayProfile:c,weekendProfile:m}});O(he)}catch(v){_(v instanceof Error?v.message:"Failed to load CSV data"),w(null),N([]),E([]),x([]),C([]),W([]),O([])}finally{J(!1)}})()},[D]),{stats:L,data:z,monthlyStats:B,hourlyProfile:G,weekdayHourlyProfile:K,weekendHourlyProfile:Q,monthlyHourlyProfiles:R,loading:T,error:U}}export{Me as u};
