import{g as $,a as D,d as v,e as S,_ as H,b,j as e,s as R,h as N,k as I,a1 as L,a2 as _,B,C as E,S as n,P as g,T as s,a3 as F,a4 as T,a5 as o,a6 as V,a7 as P,a8 as w,a9 as k}from"./index-D3ORLXfS.js";import{P as q}from"./PageHeader-Dhpuexm5.js";import{u as O}from"./useDetailQuery-JD9pubcq.js";import{u as Q}from"./useCSVStatistics-RDUlokwO.js";import{P as W}from"./react-plotly-DHFOnJ7y.js";import{M as p}from"./MenuItem-CTtpSCy6.js";import"./useQuery-vt_aQop5.js";import"./index-Chjiymov.js";import"./dividerClasses-BDvlwp2Z.js";function X(t){return $("MuiTableContainer",t)}D("MuiTableContainer",["root"]);const G=["className","component"],J=t=>{const{classes:i}=t;return I({root:["root"]},X,i)},K=R("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,i)=>i.root})({width:"100%",overflowX:"auto"}),Y=v.forwardRef(function(i,l){const c=S({props:i,name:"MuiTableContainer"}),{className:m,component:h="div"}=c,j=H(c,G),x=b({},c,{component:h}),f=J(x);return e.jsx(K,b({ref:l,as:h,className:N(f.root,m),ownerState:x},j))});function Z(t){return $("MuiTableHead",t)}D("MuiTableHead",["root"]);const ee=["className","component"],ae=t=>{const{classes:i}=t;return I({root:["root"]},Z,i)},re=R("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,i)=>i.root})({display:"table-header-group"}),ie={variant:"head"},M="thead",se=v.forwardRef(function(i,l){const c=S({props:i,name:"MuiTableHead"}),{className:m,component:h=M}=c,j=H(c,ee),x=b({},c,{component:h}),f=ae(x);return e.jsx(L.Provider,{value:ie,children:e.jsx(re,b({as:h,className:N(f.root,m),ref:l,role:h===M?null:"rowgroup",ownerState:x},j))})});function te({filename:t}){const{stats:i,data:l,monthlyStats:c,hourlyProfile:m,weekdayHourlyProfile:h,weekendHourlyProfile:j,monthlyHourlyProfiles:x,loading:f,error:C}=Q(t),[d,A]=v.useState("average"),[y,z]=v.useState("all"),[u,U]=v.useState("all");return t?f?e.jsx(g,{sx:{padding:2},children:e.jsx(s,{children:"Loading CSV data..."})}):C?e.jsx(g,{sx:{padding:2},children:e.jsxs(s,{color:"error",children:["Error: ",C]})}):i?e.jsxs(n,{spacing:3,children:[e.jsx(g,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsxs(s,{variant:"h6",fontWeight:"bold",children:["Data Summary for ",t,".csv"]}),e.jsxs(n,{spacing:1,children:[e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{fontWeight:"bold",children:"Number of datapoints:"}),e.jsx(s,{children:i.count.toLocaleString()})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{fontWeight:"bold",children:"Average Price ($/kWh):"}),e.jsxs(s,{children:["$",i.average]})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{fontWeight:"bold",children:"Median Price ($/kWh):"}),e.jsxs(s,{children:["$",i.median]})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{fontWeight:"bold",children:"Maximum Price ($/kWh):"}),e.jsxs(s,{children:["$",i.max]})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{fontWeight:"bold",children:"Minimum Price ($/kWh):"}),e.jsxs(s,{children:["$",i.min]})]})]})]})}),e.jsx(g,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsx(s,{variant:"h6",fontWeight:"bold",children:"Monthly Statistics"}),e.jsx(Y,{children:e.jsxs(F,{children:[e.jsx(se,{children:e.jsxs(T,{children:[e.jsx(o,{children:e.jsx("strong",{children:"Month"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Average ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Median ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Max ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Min ($/kWh)"})}),e.jsx(o,{align:"right",children:e.jsx("strong",{children:"Data Points"})})]})}),e.jsx(V,{children:c.map(a=>e.jsxs(T,{hover:!0,children:[e.jsx(o,{children:a.month}),e.jsxs(o,{align:"right",children:["$",a.average]}),e.jsxs(o,{align:"right",children:["$",a.median]}),e.jsxs(o,{align:"right",children:["$",a.max]}),e.jsxs(o,{align:"right",children:["$",a.min]}),e.jsx(o,{align:"right",children:a.count.toLocaleString()})]},a.month))})]})})]})}),e.jsx(g,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsxs(n,{direction:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,children:[e.jsx(s,{variant:"h6",fontWeight:"bold",children:"Typical Daily Profile"}),e.jsxs(n,{direction:"row",spacing:2,flexWrap:"wrap",children:[e.jsxs(P,{size:"small",sx:{minWidth:150},children:[e.jsx(w,{id:"month-filter-label",children:"Time Period"}),e.jsxs(k,{labelId:"month-filter-label",id:"month-filter-select",value:y,label:"Time Period",onChange:a=>z(a.target.value),children:[e.jsx(p,{value:"all",children:"All Data"}),x.map(a=>e.jsx(p,{value:a.month,children:a.month},a.month))]})]}),e.jsxs(P,{size:"small",sx:{minWidth:120},children:[e.jsx(w,{id:"day-type-label",children:"Day Type"}),e.jsxs(k,{labelId:"day-type-label",id:"day-type-select",value:u,label:"Day Type",onChange:a=>U(a.target.value),children:[e.jsx(p,{value:"all",children:"All Days"}),e.jsx(p,{value:"weekday",children:"Weekday"}),e.jsx(p,{value:"weekend",children:"Weekend"})]})]}),e.jsxs(P,{size:"small",sx:{minWidth:120},children:[e.jsx(w,{id:"hourly-metric-label",children:"Metric"}),e.jsxs(k,{labelId:"hourly-metric-label",id:"hourly-metric-select",value:d,label:"Metric",onChange:a=>A(a.target.value),children:[e.jsx(p,{value:"average",children:"Average"}),e.jsx(p,{value:"median",children:"Median"})]})]})]})]}),e.jsx(W,{data:[{x:(()=>{if(y==="all")return u==="weekday"?h.map(a=>a.hour):u==="weekend"?j.map(a=>a.hour):m.map(a=>a.hour);{const a=x.find(r=>r.month===y);return a?u==="weekday"?a.weekdayProfile.map(r=>r.hour):u==="weekend"?a.weekendProfile.map(r=>r.hour):a.profile.map(r=>r.hour):m.map(r=>r.hour)}})(),y:(()=>{if(y==="all")return u==="weekday"?h.map(a=>d==="average"?a.averagePrice:a.medianPrice):u==="weekend"?j.map(a=>d==="average"?a.averagePrice:a.medianPrice):m.map(a=>d==="average"?a.averagePrice:a.medianPrice);{const a=x.find(r=>r.month===y);return a?u==="weekday"?a.weekdayProfile.map(r=>d==="average"?r.averagePrice:r.medianPrice):u==="weekend"?a.weekendProfile.map(r=>d==="average"?r.averagePrice:r.medianPrice):a.profile.map(r=>d==="average"?r.averagePrice:r.medianPrice):m.map(r=>d==="average"?r.averagePrice:r.medianPrice)}})(),type:"scatter",mode:"lines+markers",name:`${d==="average"?"Average":"Median"} Price`,line:{color:"#2e7d32",width:2},marker:{size:6}}],layout:{autosize:!0,margin:{l:60,r:40,t:20,b:60},xaxis:{title:"Hour of Day",tickmode:"linear",tick0:0,dtick:2,range:[-.5,23.5]},yaxis:{title:`${d==="average"?"Average":"Median"} Price ($/kWh)`},showlegend:!1},style:{width:"100%",height:"400px"},config:{responsive:!0}})]})}),e.jsx(g,{sx:{padding:2},children:e.jsxs(n,{spacing:2,children:[e.jsx(s,{variant:"h6",fontWeight:"bold",children:"Price Over Time"}),e.jsx(W,{data:[{x:l.map(a=>a.datetime),y:l.map(a=>a.price),type:"scatter",mode:"lines",name:"Price ($/kWh)",line:{color:"#1976d2"}}],layout:{autosize:!0,margin:{l:60,r:40,t:20,b:80},xaxis:{title:"Date/Time",tickangle:-45},yaxis:{title:"Price ($/kWh)"},showlegend:!1},style:{width:"100%",height:"400px"},config:{responsive:!0}})]})})]}):e.jsx(g,{sx:{padding:2},children:e.jsx(s,{children:"No statistics available"})}):e.jsx(g,{sx:{padding:2},children:e.jsx(s,{children:"No file selected"})})}const ge=function(){const{id:i}=_.useParams(),{data:l}=O({dataSource:"dummy-data/file-entities.json",dataIdField:"name",paramId:i,queryMode:"client",staticParams:null});return e.jsxs(B,{children:[e.jsx(q,{pageTitle:l?`${l.name}.csv`:"",breadcrumbTitle:"File Detail",sx:{marginBottom:1,padding:2}}),e.jsx(E,{maxWidth:"xl",children:e.jsx(n,{children:e.jsx(te,{filename:l?l.name:""})})})]})};export{ge as component};
