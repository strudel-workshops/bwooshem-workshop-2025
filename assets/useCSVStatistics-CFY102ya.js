import{d as s,E as Q,F as R}from"./index-DcHxBZT6.js";function et(f){const[D,g]=s.useState(null),[w,S]=s.useState([]),[V,M]=s.useState([]),[k,y]=s.useState([]),[F,p]=s.useState(!1),[O,b]=s.useState(null);return s.useEffect(()=>{if(!f){g(null),S([]),M([]),y([]),p(!1),b(null);return}(async()=>{var x;p(!0),b(null);try{const l=((x=document.querySelector("base"))==null?void 0:x.getAttribute("href"))??"",C="/bwooshem-workshop-2025/",$=`${Q((C?"/":"")+l+C)}/data/${f}.csv`,c=await R($);if(!c||c.length===0)throw new Error("No data found in CSV file");const j=Object.keys(c[0])[0],J=Object.keys(c[0])[1],n=[],i=[];if(c.forEach(a=>{const e=parseFloat(a[J]);isNaN(e)||(n.push(e),i.push({datetime:a[j],price:e}))}),n.length===0)throw new Error("No valid price data found");S(i);const r=n.length,H=n.reduce((a,e)=>a+e,0)/r,P=[...n].sort((a,e)=>a-e),I=r%2===0?(P[r/2-1]+P[r/2])/2:P[Math.floor(r/2)],q=Math.max(...n),L=Math.min(...n);g({count:r,average:Math.round(H*1e4)/1e4,median:Math.round(I*1e4)/1e4,max:Math.round(q*1e4)/1e4,min:Math.round(L*1e4)/1e4});const h={};i.forEach(a=>{const t=a.datetime.split(" ")[0].substring(0,7);h[t]||(h[t]=[]),h[t].push(a.price)});const _=Object.keys(h).sort().map(a=>{const e=h[a],t=e.length,d=e.reduce((E,N)=>E+N,0)/t,o=[...e].sort((E,N)=>E-N),u=t%2===0?(o[t/2-1]+o[t/2])/2:o[Math.floor(t/2)],v=Math.max(...e),B=Math.min(...e),[G,K]=a.split("-");return{month:`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(K,10)-1]} ${G}`,average:Math.round(d*1e4)/1e4,median:Math.round(u*1e4)/1e4,max:Math.round(v*1e4)/1e4,min:Math.round(B*1e4)/1e4,count:t}});M(_);const m={};i.forEach(a=>{const e=a.datetime.split(" ")[1],t=parseInt(e.split(":")[0],10);m[t]||(m[t]=[]),m[t].push(a.price)});const z=Array.from({length:24},(a,e)=>{const t=m[e]||[],A=t.length>0?t.reduce((o,u)=>o+u,0)/t.length:0;let d=0;if(t.length>0){const o=[...t].sort((u,v)=>u-v);d=t.length%2===0?(o[t.length/2-1]+o[t.length/2])/2:o[Math.floor(t.length/2)]}return{hour:e,averagePrice:Math.round(A*1e4)/1e4,medianPrice:Math.round(d*1e4)/1e4}});y(z)}catch(l){b(l instanceof Error?l.message:"Failed to load CSV data"),g(null),S([]),M([]),y([])}finally{p(!1)}})()},[f]),{stats:D,data:w,monthlyStats:V,hourlyProfile:k,loading:F,error:O}}export{et as u};
